<link rel="import" href="elements.html">

<!--
Element providing the library main booking component

##### Example

    <uqlibrary-booking></uqlibrary-booking>

@element uqlibrary-booking
@blurb Element providing the library booking ability for staff to diagnose end user issues
@homepage http://uqlibrary.github.io/uqlibrary-booking
-->
<dom-module id="uqlibrary-booking">
  <!-- All element styles -->
  <style is="custom-style" include="iron-flex iron-flex-alignment common-styles">
    :host {
      @apply(--uql-app-host);
    }

    neon-animated-pages {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }

    .back-arrow {
      margin-right: 20px;
    }
  </style>

  <!-- Template -->
  <template>
    <uqlibrary-api-account id="account"></uqlibrary-api-account>
    <uqlibrary-api-contacts id="contactsApi"></uqlibrary-api-contacts>
    <uqlibrary-ga id="ga" appName="FBS"></uqlibrary-ga>
    <uqlibrary-api-facilities-availability id="facilities"></uqlibrary-api-facilities-availability>

    <paper-toast id="toast" text="[[_errorMessage]]"></paper-toast>

    <div class="fit layout vertical">
      <paper-header-panel class="flex">
        <!-- Header -->
        <paper-toolbar>
          <!-- Required -->
          <template is="dom-if" if="{{!standAlone}}">
            <paper-icon-button icon="menu" on-tap="_toggleDrawerPanel" paper-drawer-toggle></paper-icon-button>
          </template>
          <template is="dom-if" if="{{_selectedPage}}">
            <paper-icon-button class="back-arrow" icon="icons:arrow-back" on-tap="_goBack"></paper-icon-button>
          </template>
          <div class="title uqlibrary-app-title">[[headerTitle]]</div>
        </paper-toolbar>
        <!-- Content -->
        <div class="fit">
          <neon-animated-pages id="pages" selected="{{_selectedPage}}" on-iron-select="_pageChanged">
            <section>
              <uqlibrary-booking-mybookings
                  id="mybookings"
                  on-add-booking="_addBooking"
                  on-select-booking="_selectBooking"
                  use-cached="{{_bookingsUseCache}}">
              </uqlibrary-booking-mybookings>
            </section>
            <section>
              <uqlibrary-booking-findroom
                  id="findroom"
                  room-list="{{_roomList}}"
                  on-search="_searchRoom">
              </uqlibrary-booking-findroom>
            </section>
            <section>
              <uqlibrary-booking-select-room
                  id="selectroom"
                  search-results="{{_searchResults}}"
                  on-book-room="_bookRoom">
              </uqlibrary-booking-select-room>
            </section>
            <section>
              <uqlibrary-booking-book-room
                  id="bookroom"
                  on-uqlibrary-booking-booking-created="_bookingCreated">
              </uqlibrary-booking-book-room>
            </section>
            <section>
              <uqlibrary-booking-display
                  id="displaybooking"
                  booking-details="{{_selectedBooking}}"
                  room-list="[[_roomList]]"
                  on-booking-deleted="_bookingDeleted"
                  on-edit-booking-started="_bookingEditingStarted">
              </uqlibrary-booking-display>
            </section>
          </neon-animated-pages>
        </div>
      </paper-header-panel>
    </div>

  </template>

  <!-- Location of the script -->
  <script src="uqlibrary-booking.js"></script>
</dom-module>
