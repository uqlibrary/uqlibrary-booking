<link rel="import" href="elements.html">

<dom-module id="uqlibrary-booking-book-room">
  <!-- All element styles -->
  <style is="custom-style" include="iron-flex iron-flex-alignment common-styles">
    :host {
      @apply(--uql-app-host);
      @apply(--loayout-vertical);
    }

    .page {
      @apply(--layout-flex);
    }

    .image-header {
      background-color: var(--theme-color);
      background-size: cover;
      background-position: 50% 50%;
      padding-top: 150px;
    }

    .image-header .title-container {
      background-color: var(--theme-color-lighter);
      padding: 16px;
    }

    p.text-container {
      padding: 16px;
    }

    .hint-box {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 1px solid var(--border-color);
      vertical-align: middle;
      margin: 0 5px;
    }

    .hint-box.selected {
      background-color: var(--accent-color);
    }

    .hint-box.available {
      background-color: var(--secondary-color-light);
    }

    .hint-box.unavailable {
      background-color: var(--secondary-color-dark);
    }
  </style>

  <!-- Template -->
  <template>
    <uqlibrary-api-facilities-booking
        id="createBookingRequest"
        on-uqlibrary-api-facilities-booking-executed="_createBookingComplete">
    </uqlibrary-api-facilities-booking>

    <paper-toast id="toast" text="[[_errorMessage]]"></paper-toast>

    <div class="page">
      <!-- Header -->
      <div class="image-header" style$="background-image: url('https://app.library.uq.edu.au/assets/images/uq-buildings/{{ _selectedRoom.imageLarge }}')">
        <div class="title-container">
          <div class="title inverse">{{_selectedRoom.title}}</div>
          <div class="subhead inverse">{{_formatLocation(_selectedRoom)}}</div>
        </div>
      </div>

      <!-- Description -->
      <p class="body1 text-container">[[ _selectedRoom.notes ]]</p>

      <!-- Date Selector -->
      <uqlibrary-date-selector id="dateSelector"
                               search-date="{{ _searchDate }}"
                               max-booking-date="{{ _maximumBookingDate }}"
                               booking-time-slots = "{{ _bookingTimeSlots }}"
                               max-booking-length="[[ _maxBookingLength ]]">
      </uqlibrary-date-selector>

      <!-- Summary -->
      <p class="body1 text-container">
        Maximum booking duration is [[_selectedRoom.maxtime]] min, minimum booking duration is [[_selectedRoom.time_span]] min
      </p>

      <!-- Legend -->
      <p class="text-container body">
        <span class="hint-box selected"></span> - your current selection
        <span class="hint-box available"></span> - available time slot
        <span class="hint-box unavailable"></span> - unavailable time slot
      </p>
    </div>

    <!-- Bottom footer -->
    <paper-toolbar class="uqlibrary-app-footer right">
      <paper-button class="button-colored-accent" on-tap="_createRoomBooking">Save Booking</paper-button>ÃŸ
    </paper-toolbar>

  </template>

  <!-- Location of the script -->
  <script src="uqlibrary-booking-book-room.js"></script>
</dom-module>
